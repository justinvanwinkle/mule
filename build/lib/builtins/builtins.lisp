(eval-when (:compile-toplevel :load-toplevel :execute)(unless (find-package "builtins")(make-package "builtins" :use '("COMMON-LISP"))(use-package "builtins")))
;(proclaim '(optimize (space 0) (safety 0) (speed 3)))
(defgeneric __hash__ (a))
(defgeneric __eq__ (a b))
(DEFMETHOD |__hash__| (|a|  ) (RETURN-FROM |__hash__| (|SXHASH| |a| )))
(DEFMETHOD |__eq__| (|a| |b|  ) (RETURN-FROM |__eq__| (|EQUAL| |a| |b| )))
(|DEFINE-HASH-TABLE-TEST| |__eq__| |__hash__| )
#|`(export '(|__eq__| |__hash__|))`
|#
(|IN-PACKAGE| "builtins" )
(import 'cl-user::|__eq__|)
(import 'cl-user::|__hash__|)
(DEFCLASS |dict| (|SEQUENCE| |STANDARD-OBJECT|) (|hash_table|)) (DEFMETHOD |len| ((|self| |dict|)   ) (RETURN-FROM |len| (|HASH-TABLE-COUNT| (SLOT-VALUE |self| '|hash_table|) ))) (DEFMETHOD |keys| ((|self| |dict|)   ) (LET ((|hashtable| (SLOT-VALUE |self| '|hash_table|))) (LET ((|lst| (|list|  ))) (loop for key being the hash-keys of |hashtable|
             do (|append| |lst| key))
(RETURN-FROM |keys| |lst|)))) (DEFMETHOD |setitem| ((|self| |dict|) |key| |value|  ) (|SETF| (|GETHASH| |key| (SLOT-VALUE |self| '|hash_table|) ) |value| )) (DEFMETHOD |getitem| ((|self| |dict|) |key|  ) (RETURN-FROM |getitem| (|GETHASH| |key| (SLOT-VALUE |self| '|hash_table|) ))) (DEFMETHOD |MAKE-SEQUENCE-ITERATOR| ((|self| |dict|)  &KEY (|FROM-END| NIL)(|START| NIL)(|END| NIL) ) (RETURN-FROM |MAKE-SEQUENCE-ITERATOR| (|MAKE-SEQUENCE-ITERATOR| (SLOT-VALUE |self| '|hash_table|) :|FROM-END| |FROM-END| :|START| |START| :|END| |END|))) (DEFUN |dict| (  &REST |args|) (LET ((|self| (make-instance '|dict|))) (SETF (SLOT-VALUE |self| '|hash_table|) (|MAKE-HASH-TABLE|  :|TEST| (|QUOTE| |__eq__| )))
|self|))
(DEFCLASS |list| (|SEQUENCE| |STANDARD-OBJECT|) (|array|)) (DEFMETHOD |__eq__| ((|self| |list|) |other|  ) (COND ((not (|__eq__| (|len| |self| ) (|len| |other| ))) (RETURN-FROM |__eq__| nil)))
(LOOP FOR |i| FROM 0 BELOW (|len| |self| ) BY 1 DO (COND ((not (|__eq__| (|getitem| |self| |i|) (|getitem| |other| |i|))) (RETURN-FROM |__eq__| nil))))
(RETURN-FROM |__eq__| t)) (DEFMETHOD |__hash__| ((|self| |list|)   ) (RETURN-FROM |__hash__| (|hash| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD |sort| ((|self| |list|) |order|  ) (|STABLE-SORT| (SLOT-VALUE |self| '|array|) |order| )) (DEFMETHOD |sorted| ((|self| |list|)   ) (RETURN-FROM |sorted| (|list| (|SORT| (|COPY-SEQ| (SLOT-VALUE |self| '|array|) ) #'|__cmp__| ) ))) (DEFMETHOD |len| ((|self| |list|)   ) (RETURN-FROM |len| (|LENGTH| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD |setitem| ((|self| |list|) |key| |value|  ) (|SETF| (|ELT| (SLOT-VALUE |self| '|array|) |key| ) |value| )) (DEFMETHOD |getitem| ((|self| |list|) |key|  ) (RETURN-FROM |getitem| (|ELT| (SLOT-VALUE |self| '|array|) |key| ))) (DEFMETHOD |append| ((|self| |list|) |val|  ) (|VECTOR-PUSH-EXTEND| |val| (SLOT-VALUE |self| '|array|) )) (DEFMETHOD SEQUENCE:LENGTH ((|self| |list|)   ) (RETURN-FROM SEQUENCE:LENGTH (|LENGTH| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD SEQUENCE:ELT ((|self| |list|) |index|  ) (RETURN-FROM SEQUENCE:ELT (|getitem| |self| |index| ))) (DEFMETHOD |MAKE-SEQUENCE-ITERATOR| ((|self| |list|)  &KEY (|FROM-END| NIL)(|START| NIL)(|END| NIL) ) (RETURN-FROM |MAKE-SEQUENCE-ITERATOR| (|MAKE-SEQUENCE-ITERATOR| (SLOT-VALUE |self| '|array|) :|FROM-END| |FROM-END| :|START| |START| :|END| |END|))) (DEFUN |list| (  &REST |args|) (LET ((|self| (make-instance '|list|))) (SETF (SLOT-VALUE |self| '|array|) (|MAKE-ARRAY| 0 :|ADJUSTABLE| t :|FILL-POINTER| t))
(LOOP FOR |lst| BEING THE ELEMENTS OF |args| DO (LOOP FOR |x| BEING THE ELEMENTS OF |lst| DO (|append| |self| |x| )))
|self|))
(DEFCLASS |tuple| (|SEQUENCE| |STANDARD-OBJECT|) (|array|)) (DEFMETHOD |len| ((|self| |tuple|)   ) (RETURN-FROM |len| (|LENGTH| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD |__hash__| ((|self| |tuple|)   ) (RETURN-FROM |__hash__| (|hash| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD |setitem| ((|self| |tuple|) |key| |value|  ) (|SETF| (|ELT| (SLOT-VALUE |self| '|array|) |key| ) |value| )) (DEFMETHOD |getitem| ((|self| |tuple|) |key|  ) (RETURN-FROM |getitem| (|ELT| (SLOT-VALUE |self| '|array|) |key| ))) (DEFMETHOD |append| ((|self| |tuple|) |val|  ) (|VECTOR-PUSH-EXTEND| |val| (SLOT-VALUE |self| '|array|) )) (DEFMETHOD SEQUENCE:LENGTH ((|self| |tuple|)   ) (RETURN-FROM SEQUENCE:LENGTH (|LENGTH| (SLOT-VALUE |self| '|array|) ))) (DEFMETHOD SEQUENCE:ELT ((|self| |tuple|) |index|  ) (RETURN-FROM SEQUENCE:ELT (|getitem| |self| |index| ))) (DEFMETHOD |MAKE-SEQUENCE-ITERATOR| ((|self| |tuple|)  &KEY (|FROM-END| NIL)(|START| NIL)(|END| NIL) ) (RETURN-FROM |MAKE-SEQUENCE-ITERATOR| (|MAKE-SEQUENCE-ITERATOR| (SLOT-VALUE |self| '|array|) :|FROM-END| |FROM-END| :|START| |START| :|END| |END|))) (DEFUN |tuple| (  &REST |args|) (LET ((|self| (make-instance '|tuple|))) (SETF (SLOT-VALUE |self| '|array|) (|MAKE-ARRAY| 0 :|ADJUSTABLE| t :|FILL-POINTER| t))
(LOOP FOR |lst| BEING THE ELEMENTS OF |args| DO (LOOP FOR |x| BEING THE ELEMENTS OF |lst| DO (|append| |self| |x| )))
|self|))
(DEFCLASS |str| (|SEQUENCE| |STANDARD-OBJECT|) (|_str|)) (DEFMETHOD |len| ((|self| |str|)   ) (RETURN-FROM |len| (|LENGTH| (SLOT-VALUE |self| '|_str|) ))) (DEFMETHOD |__eq__| ((|self| |str|) (|other| |str|)  ) (RETURN-FROM |__eq__| (|__eq__| |self| (SLOT-VALUE |other| '|_str|)))) (DEFMETHOD |__eq__| ((|self| |str|) (|other| |STRING|)  ) (RETURN-FROM |__eq__| (STRING= (SLOT-VALUE |self| '|_str|) |other| ))) (DEFMETHOD |__eq__| ((|a| |STRING|) (|other| |str|)  ) (RETURN-FROM |__eq__| (|__eq__| |other| |a|))) (DEFMETHOD |__cmp__| ((|self| |str|) (|other| |str|)  ) (RETURN-FROM |__cmp__| (STRING< (SLOT-VALUE |self| '|_str|) (SLOT-VALUE |other| '|_str|) ))) (DEFMETHOD |__cmp__| ((|self| |str|) (|other| |STRING|)  ) (RETURN-FROM |__cmp__| (STRING< (SLOT-VALUE |self| '|_str|) (SLOT-VALUE |other| '|_str|) ))) (DEFMETHOD |getitem| ((|self| |str|) |key|  ) (RETURN-FROM |getitem| (|ELT| (SLOT-VALUE |self| '|array|) |key| ))) (DEFMETHOD SEQUENCE:LENGTH ((|self| |str|)   ) (RETURN-FROM SEQUENCE:LENGTH (|LENGTH| (SLOT-VALUE |self| '|_str|) ))) (DEFMETHOD SEQUENCE:ELT ((|self| |str|) |index|  ) (RETURN-FROM SEQUENCE:ELT (|getitem| |self| |index| ))) (DEFMETHOD |MAKE-SEQUENCE-ITERATOR| ((|self| |str|)  &KEY (|FROM-END| NIL)(|START| NIL)(|END| NIL) ) (RETURN-FROM |MAKE-SEQUENCE-ITERATOR| (|MAKE-SEQUENCE-ITERATOR| (SLOT-VALUE |self| '|array|) :|FROM-END| |FROM-END| :|START| |START| :|END| |END|))) (DEFUN |str| (|str|  ) (LET ((|self| (make-instance '|str|))) (SETF (SLOT-VALUE |self| '|_str|) |str|)
|self|))
(DEFUN |hash| (|a|  ) (RETURN-FROM |hash| (|__hash__| |a| )))
(DEFMETHOD |sorted| (|lst|  ) (RETURN-FROM |sorted| (|SORT| (|COPY-SEQ| |lst| ) #'|__cmp__| )))
(DEFMETHOD |__cmp__| (|a| |b|  ) (RETURN-FROM |__cmp__| (< (|SXHASH| |a| ) (|SXHASH| |b| ))))
(DEFMETHOD |__cmp__| ((|a| |NUMBER|) (|b| |NUMBER|)  ) (RETURN-FROM |__cmp__| (< |a| |b|)))
(DEFMETHOD |__eq__| ((|a| |REAL|) (|b| |FIXNUM|)  ) (RETURN-FROM |__eq__| (AND (not (> |a| |b|) ) (not (< |a| |b|) ))))
(DEFMETHOD |__eq__| ((|a| |FIXNUM|) (|b| |REAL|)  ) (RETURN-FROM |__eq__| (AND (not (> |a| |b|) ) (not (< |a| |b|) ))))
(DEFMETHOD |__hash__| ((|a| |FIXNUM|)  ) (RETURN-FROM |__hash__| |a|))
(DEFMETHOD |__hash__| ((|a| |REAL|)  ) (LET ((|int_part| (|ROUND| |a| ))) (COND ((|__eq__| |int_part| |a|) (RETURN-FROM |__hash__| |int_part|)))
(RETURN-FROM |__hash__| (|SXHASH| |a| ))))
(LOOP FOR S BEING EACH PRESENT-SYMBOL IN *PACKAGE*
   WHEN (OR (FBOUNDP S) (BOUNDP S) (FIND-CLASS S NIL))
   DO (EXPORT S))

